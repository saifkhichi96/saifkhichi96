---
layout: doc
title: _norm
permalink: /basic-sat/bsat/norm/_norm/
---

<div class="pdoc">
  <div class="docstring">
    <p>Defines all the classes in the 'norm' package.</p>

    <p>This is the internal definition of the package, with all the public and private classes defined here. Only the public classes are exported for external use.</p>
  </div>


  <section id="NNF">
    <div class="attr class">
      <a class="headerlink" href="#NNF">#&nbsp;&nbsp</a>


      <span class="def">class</span>
      <span class="name">NNF</span><wbr>(<span class="base"><a href="#_NF">_NF</a></span>):
    </div>

    <details>
      <summary>View Source</summary>
      <div class="codehilite">
        <pre><span></span><span class="k">class</span> <span class="nc">NNF</span><span class="p">(</span><span class="n">_NF</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Defines a Boolean formula in the negation normal form.</span>

<span class="sd">    In Boolean logic, a formula is in negation normal form if the negation operator (NOT) is</span>
<span class="sd">    only applied to variables and the only other allowed Boolean operators are conjunction</span>
<span class="sd">    (AND) and disjunction (OR).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the NNF formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formula: The Boolean formula to represent in NNF.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_NF</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts the input formula to negation normal form.</span>

<span class="sd">        Every formula can be brought into this form by replacing implications and equivalences</span>
<span class="sd">        by their definitions, using De Morgan&#39;s laws to push negation inwards, and eliminating</span>
<span class="sd">        double negations.</span>

<span class="sd">        Args:</span>
<span class="sd">            expr: The formula to convert to NNF.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An equivalent formula in negation normal form.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">simplify_operators</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">de_morgans_law</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre>
      </div>

    </details>

    <div class="docstring">
      <p>Defines a Boolean formula in the negation normal form.</p>

      <p>In Boolean logic, a formula is in negation normal form if the negation operator (NOT) is
        only applied to variables and the only other allowed Boolean operators are conjunction
        (AND) and disjunction (OR).</p>
    </div>


    <div id="NNF.__init__" class="classattr">
      <div class="attr function"><a class="headerlink" href="#NNF.__init__">#&nbsp;&nbsp</a>


        <span class="name">NNF</span><span class="signature">(formula: str)</span>
      </div>

      <details>
        <summary>View Source</summary>
        <div class="codehilite">
          <pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the NNF formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formula: The Boolean formula to represent in NNF.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_NF</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">)</span>
</pre>
        </div>

      </details>

      <div class="docstring">
        <p>Inits the NNF formula.</p>

        <p>Args:
          formula: The Boolean formula to represent in NNF.</p>
      </div>


    </div>
    <div class="inherited">
      <h5>Inherited Members</h5>
      <dl>
        <div><dt><a href="#_NF">_NF</a></dt>
          <dd id="NNF.max_solutions" class="variable"><a href="#_NF.max_solutions">max_solutions</a></dd>
          <dd id="NNF.parse_tree" class="variable"><a href="#_NF.parse_tree">parse_tree</a></dd>

        </div>
      </dl>
    </div>
  </section>
  <section id="CNF">
    <div class="attr class">
      <a class="headerlink" href="#CNF">#&nbsp;&nbsp</a>


      <span class="def">class</span>
      <span class="name">CNF</span><wbr>(<span class="base"><a href="#_NF">_NF</a></span>):
    </div>

    <details>
      <summary>View Source</summary>
      <div class="codehilite">
        <pre><span></span><span class="k">class</span> <span class="nc">CNF</span><span class="p">(</span><span class="n">_NF</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Defines a Boolean formula in the conjunctive normal form.</span>

<span class="sd">    In Boolean logic, a formula is in conjunctive normal form (CNF) or clausal normal form if</span>
<span class="sd">    it is a conjunction of one or more clauses, where a clause is a disjunction of literals;</span>
<span class="sd">    otherwise put, it is an AND of ORs.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the CNF formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formula: The Boolean formula to represent in CNF.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_NF</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts the input formula to conjunctive normal form.</span>

<span class="sd">        Every propositional formula can be converted into an equivalent formula that is in CNF</span>
<span class="sd">        based on rules about logical equivalences: double negation elimination, De Morgan&#39;s laws,</span>
<span class="sd">        and the distributive law.</span>

<span class="sd">        Args:</span>
<span class="sd">            expr: The formula to convert to CNF.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An equivalent formula in conjunctive normal form.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="n">distribute_ands</span><span class="p">(</span><span class="n">NNF</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span><span class="o">.</span><span class="n">_expr</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">expr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clauses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List of clauses in the CNF.&quot;&quot;&quot;</span>
        <span class="n">clauses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_clauses</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_expr</span><span class="o">.</span><span class="n">parse_tree</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">clauses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">clauses</span>

    <span class="k">def</span> <span class="nf">_get_clauses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">eof</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Internal accessor to calculate the &#39;clauses&#39; property.</span>

<span class="sd">        Args:</span>
<span class="sd">            tree: Parse tree of the formula to find clauses in.</span>
<span class="sd">            eof: Optional; Line break is added after the clause if True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of all the clauses in the formula, represented as a single string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">clause</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">op</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
                <span class="n">clause</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_clauses</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">op</span> <span class="o">==</span> <span class="n">Operators</span><span class="o">.</span><span class="n">AND</span><span class="p">))</span>
                <span class="n">clause</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_clauses</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="n">op</span> <span class="o">==</span> <span class="n">Operators</span><span class="o">.</span><span class="n">AND</span><span class="p">))</span>

            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">op</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
                <span class="n">clause</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">op</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_clauses</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">clause</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">  &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree</span><span class="p">)))</span>

        <span class="n">clause</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">clause</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">eof</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">clause</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">clause</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">return</span> <span class="n">clause</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dimacs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The DIMACS CNF representation of the CNF formula.&quot;&quot;&quot;</span>
        <span class="n">clauses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clauses</span>

        <span class="n">raw</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">clause</span> <span class="ow">in</span> <span class="n">clauses</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">+=</span> <span class="n">clause</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Operators</span><span class="o">.</span><span class="n">NOT</span><span class="p">),</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;  0</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">literals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expr</span><span class="o">.</span><span class="n">literals</span>
        <span class="k">for</span> <span class="n">lt</span> <span class="ow">in</span> <span class="n">literals</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">lt</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">literals</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;c the CNF formula &#39;</span><span class="si">{}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span> \
               <span class="s1">&#39;c in DIMACS format&#39;</span> \
               <span class="s1">&#39;c&#39;</span> \
               <span class="s1">&#39;p cnf </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span> \
               <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                           <span class="nb">len</span><span class="p">(</span><span class="n">literals</span><span class="p">),</span>
                           <span class="nb">len</span><span class="p">(</span><span class="n">clauses</span><span class="p">),</span>
                           <span class="n">raw</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;See base class.&quot;&quot;&quot;</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">clauses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clauses</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">clause</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">clauses</span><span class="p">):</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s1">&#39;(&#39;</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">clause</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">item</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">item</span> <span class="o">!=</span> <span class="n">Operators</span><span class="o">.</span><span class="n">NOT</span><span class="p">:</span>
                    <span class="n">string</span> <span class="o">+=</span> <span class="n">item</span>
                    <span class="n">string</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; </span><span class="si">{</span><span class="n">Operators</span><span class="o">.</span><span class="n">OR</span><span class="si">}</span><span class="s1"> &#39;</span>
            <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">clauses</span><span class="p">):</span>
                <span class="n">string</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; </span><span class="si">{</span><span class="n">Operators</span><span class="o">.</span><span class="n">AND</span><span class="si">}</span><span class="s1"> &#39;</span>

        <span class="k">return</span> <span class="n">string</span>
</pre>
      </div>

    </details>

    <div class="docstring">
      <p>Defines a Boolean formula in the conjunctive normal form.</p>

      <p>In Boolean logic, a formula is in conjunctive normal form (CNF) or clausal normal form if
        it is a conjunction of one or more clauses, where a clause is a disjunction of literals;
        otherwise put, it is an AND of ORs.</p>
    </div>


    <div id="CNF.__init__" class="classattr">
      <div class="attr function"><a class="headerlink" href="#CNF.__init__">#&nbsp;&nbsp</a>


        <span class="name">CNF</span><span class="signature">(formula: str)</span>
      </div>

      <details>
        <summary>View Source</summary>
        <div class="codehilite">
          <pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inits the CNF formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formula: The Boolean formula to represent in CNF.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_NF</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="p">)</span>
</pre>
        </div>

      </details>

      <div class="docstring">
        <p>Inits the CNF formula.</p>

        <p>Args:
          formula: The Boolean formula to represent in CNF.</p>
      </div>


    </div>
    <div id="CNF.clauses" class="classattr">
      <div class="attr variable"><a class="headerlink" href="#CNF.clauses">#&nbsp;&nbsp</a>

        <span class="name">clauses</span>
      </div>

      <div class="docstring">
        <p>List of clauses in the CNF.</p>
      </div>


    </div>
    <div id="CNF.dimacs" class="classattr">
      <div class="attr variable"><a class="headerlink" href="#CNF.dimacs">#&nbsp;&nbsp</a>

        <span class="name">dimacs</span><span class="annotation">: str</span>
      </div>

      <div class="docstring">
        <p>The DIMACS CNF representation of the CNF formula.</p>
      </div>


    </div>
    <div class="inherited">
      <h5>Inherited Members</h5>
      <dl>
        <div><dt><a href="#_NF">_NF</a></dt>
          <dd id="CNF.max_solutions" class="variable"><a href="#_NF.max_solutions">max_solutions</a></dd>
          <dd id="CNF.parse_tree" class="variable"><a href="#_NF.parse_tree">parse_tree</a></dd>

        </div>
      </dl>
    </div>
  </section>
</div>

<aside class="col-md-4">
  <!-- Table of Contents -->
  <section>


    <h2>API Documentation</h2>
    <ul class="memberlist">
      <li>
        <a class="class" href="#NNF">NNF</a>
        <ul class="memberlist">
          <li>
            <a class="function" href="#NNF.__init__">NNF</a>
          </li>
        </ul>

      </li>
      <li>
        <a class="class" href="#CNF">CNF</a>
        <ul class="memberlist">
          <li>
            <a class="function" href="#CNF.__init__">CNF</a>
          </li>
          <li>
            <a class="variable" href="#CNF.clauses">clauses</a>
          </li>
          <li>
            <a class="variable" href="#CNF.dimacs">dimacs</a>
          </li>
        </ul>

      </li>
    </ul>

  </section>

  <!-- Feedback -->
  <section class="mdc-card mdc-card--outlined">
    <div class="mdc-card__content">
      <p>
        This page is maintained by <a href="https://github.com/saifkhichi96/">saifkhichi96</a> on GitHub under the GNU General Public License.
      </p>
      <p>
        Is there a problem? You can <a href="https://github.com/saifkhichi96/basic-sat/issues/" target="_blank">submit an issue</a> or help us <a href="https://github.com/saifkhichi96/basic-sat/edit/main/" target="_blank">improve this
          page</a>.
      </p>
    </div>
  </section>
</aside>
